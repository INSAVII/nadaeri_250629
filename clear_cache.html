<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .step {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }

        .warning {
            background: #fff3cd;
            border-left-color: #ffc107;
            color: #856404;
        }

        .success {
            background: #d4edda;
            border-left-color: #28a745;
            color: #155724;
        }

        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #0056b3;
        }

        .danger {
            background: #dc3545;
        }

        .danger:hover {
            background: #c82333;
        }

        .info {
            background: #17a2b8;
        }

        .info:hover {
            background: #138496;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ§¹ ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ ë„êµ¬</h1>
        <p>ì´ ë„êµ¬ëŠ” ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì™„ì „íˆ ì‚­ì œí•˜ì—¬ "updateUserBalance is not a function" ì˜¤ë¥˜ë¥¼ í•´ê²°í•©ë‹ˆë‹¤.</p>

        <div class="step warning">
            <h3>âš ï¸ ì£¼ì˜ì‚¬í•­</h3>
            <p>ìºì‹œë¥¼ ì‚­ì œí•˜ë©´ ëª¨ë“  ë¡œê·¸ì¸ ì •ë³´ì™€ ì„¤ì •ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì•¼ í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="step">
            <h3>1ë‹¨ê³„: ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ</h3>
            <p>ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì‚­ì œí•˜ì„¸ìš”:</p>
            <button onclick="clearAllCache()" class="danger">ğŸ—‘ï¸ ëª¨ë“  ìºì‹œ ì‚­ì œ</button>
            <button onclick="clearLocalStorage()" class="danger">ğŸ—‘ï¸ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì‚­ì œ</button>
            <button onclick="clearSessionStorage()" class="danger">ğŸ—‘ï¸ ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ì‚­ì œ</button>
        </div>

        <div class="step">
            <h3>2ë‹¨ê³„: ê°•ì œ ìƒˆë¡œê³ ì¹¨</h3>
            <p>ìºì‹œ ì‚­ì œ í›„ ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ê°•ì œ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”:</p>
            <button onclick="forceReload()" class="info">ğŸ”„ ê°•ì œ ìƒˆë¡œê³ ì¹¨</button>
        </div>

        <div class="step">
            <h3>3ë‹¨ê³„: ìˆ˜ë™ ìºì‹œ ì‚­ì œ (ê¶Œì¥)</h3>
            <p>ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ìºì‹œë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒì´ ê°€ì¥ í™•ì‹¤í•©ë‹ˆë‹¤:</p>
            <ul>
                <li><strong>Chrome/Edge:</strong> Ctrl + Shift + Delete â†’ "ëª¨ë“  ì‹œê°„" ì„ íƒ â†’ "ìºì‹œëœ ì´ë¯¸ì§€ ë° íŒŒì¼" ì²´í¬ â†’ "ë°ì´í„° ì‚­ì œ"</li>
                <li><strong>Firefox:</strong> Ctrl + Shift + Delete â†’ "ëª¨ë“  ì‹œê°„" ì„ íƒ â†’ "ìºì‹œ" ì²´í¬ â†’ "ì§€ê¸ˆ ì‚­ì œ"</li>
                <li><strong>Safari:</strong> ê°œë°œì ë©”ë‰´ â†’ "ìºì‹œ ë¹„ìš°ê¸°"</li>
            </ul>
        </div>

        <div class="step success">
            <h3>4ë‹¨ê³„: í…ŒìŠ¤íŠ¸</h3>
            <p>ìºì‹œ ì‚­ì œ í›„ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:</p>
            <ol>
                <li>http://localhost:3003 ì ‘ì†</li>
                <li>ê´€ë¦¬ìë¡œ ë‹¤ì‹œ ë¡œê·¸ì¸</li>
                <li>QName í˜ì´ì§€ì—ì„œ íŒŒì¼ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸</li>
                <li>"updateUserBalance is not a function" ì˜¤ë¥˜ê°€ ì‚¬ë¼ì¡ŒëŠ”ì§€ í™•ì¸</li>
            </ol>
        </div>

        <div id="status" class="step" style="display: none;">
            <h3>ìƒíƒœ</h3>
            <div id="statusContent"></div>
        </div>
    </div>

    <script>
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            const statusContent = document.getElementById('statusContent');
            statusDiv.style.display = 'block';
            statusDiv.className = `step ${type}`;
            statusContent.innerHTML = message;
        }

        function clearAllCache() {
            try {
                // localStorage ì‚­ì œ
                localStorage.clear();

                // sessionStorage ì‚­ì œ
                sessionStorage.clear();

                // IndexedDB ì‚­ì œ (ê°€ëŠ¥í•œ ê²½ìš°)
                if ('indexedDB' in window) {
                    indexedDB.databases().then(databases => {
                        databases.forEach(db => {
                            indexedDB.deleteDatabase(db.name);
                        });
                    });
                }

                // ìºì‹œ API ì‚­ì œ (ê°€ëŠ¥í•œ ê²½ìš°)
                if ('caches' in window) {
                    caches.keys().then(names => {
                        names.forEach(name => {
                            caches.delete(name);
                        });
                    });
                }

                showStatus('âœ… ëª¨ë“  ìºì‹œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            } catch (error) {
                showStatus('âŒ ìºì‹œ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'warning');
            }
        }

        function clearLocalStorage() {
            try {
                localStorage.clear();
                showStatus('âœ… ë¡œì»¬ìŠ¤í† ë¦¬ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            } catch (error) {
                showStatus('âŒ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'warning');
            }
        }

        function clearSessionStorage() {
            try {
                sessionStorage.clear();
                showStatus('âœ… ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            } catch (error) {
                showStatus('âŒ ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'warning');
            }
        }

        function forceReload() {
            try {
                // ê°•ì œ ìƒˆë¡œê³ ì¹¨
                window.location.reload(true);
            } catch (error) {
                showStatus('âŒ ìƒˆë¡œê³ ì¹¨ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'warning');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ìºì‹œ ìƒíƒœ í™•ì¸
        window.onload = function () {
            const localStorageSize = JSON.stringify(localStorage).length;
            const sessionStorageSize = JSON.stringify(sessionStorage).length;

            showStatus(`
                <p><strong>í˜„ì¬ ìºì‹œ ìƒíƒœ:</strong></p>
                <ul>
                    <li>ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í¬ê¸°: ${localStorageSize} ë°”ì´íŠ¸</li>
                    <li>ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ í¬ê¸°: ${sessionStorageSize} ë°”ì´íŠ¸</li>
                    <li>ìºì‹œëœ í˜ì´ì§€: ${navigator.userAgent.includes('Chrome') ? 'Chrome' : 'ê¸°íƒ€ ë¸Œë¼ìš°ì €'}</li>
                </ul>
            `, 'info');
        };
    </script>
</body>

</html>