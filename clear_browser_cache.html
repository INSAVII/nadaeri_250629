<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì •ë¦¬</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background-color 0.3s;
        }

        .button:hover {
            background: #c82333;
        }

        .button.success {
            background: #28a745;
        }

        .button.success:hover {
            background: #218838;
        }

        .info {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ§¹ ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì •ë¦¬ ë„êµ¬</h1>

        <div class="info">
            <h3>ğŸ“‹ ì •ë¦¬ ëŒ€ìƒ</h3>
            <ul>
                <li><strong>localStorage</strong> - ëª¨ë“  í‚¤-ê°’ ìŒ ì‚­ì œ</li>
                <li><strong>sessionStorage</strong> - ëª¨ë“  í‚¤-ê°’ ìŒ ì‚­ì œ</li>
                <li><strong>ì¿ í‚¤</strong> - í˜„ì¬ ë„ë©”ì¸ì˜ ëª¨ë“  ì¿ í‚¤ ì‚­ì œ</li>
                <li><strong>ìºì‹œ</strong> - ë¸Œë¼ìš°ì € ìºì‹œ ì •ë¦¬</li>
            </ul>
        </div>

        <div class="warning">
            <h3>âš ï¸ ì£¼ì˜ì‚¬í•­</h3>
            <p>ì´ ë„êµ¬ëŠ” í˜„ì¬ ë„ë©”ì¸ì˜ ëª¨ë“  ë¸Œë¼ìš°ì € ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. ë¡œê·¸ì¸ ì •ë³´, ì„¤ì •, ê¸°íƒ€ ì €ì¥ëœ ë°ì´í„°ê°€ ëª¨ë‘ ì‚¬ë¼ì§‘ë‹ˆë‹¤.</p>
        </div>

        <div>
            <button class="button" onclick="clearAllData()">ğŸš¨ ëª¨ë“  ë°ì´í„° ì™„ì „ ì‚­ì œ</button>
            <button class="button success" onclick="clearAuthData()">ğŸ” ì¸ì¦ ë°ì´í„°ë§Œ ì‚­ì œ</button>
            <button class="button" onclick="showCurrentData()">ğŸ“Š í˜„ì¬ ë°ì´í„° í™•ì¸</button>
        </div>

        <div id="status"></div>
        <div id="log" class="log" style="display: none;"></div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}\n`;
            logDiv.style.display = 'block';
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        function showStatus(message, type = 'success') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function clearAllData() {
            if (!confirm('ì •ë§ë¡œ ëª¨ë“  ë¸Œë¼ìš°ì € ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                return;
            }

            log('=== ëª¨ë“  ë°ì´í„° ì‚­ì œ ì‹œì‘ ===');

            try {
                // localStorage ì •ë¦¬
                const localStorageKeys = Object.keys(localStorage);
                log(`localStorage í‚¤ ê°œìˆ˜: ${localStorageKeys.length}`);
                localStorageKeys.forEach(key => {
                    log(`ì‚­ì œ: localStorage['${key}']`);
                    localStorage.removeItem(key);
                });
                log('localStorage ì™„ì „ ì •ë¦¬ ì™„ë£Œ');

                // sessionStorage ì •ë¦¬
                const sessionStorageKeys = Object.keys(sessionStorage);
                log(`sessionStorage í‚¤ ê°œìˆ˜: ${sessionStorageKeys.length}`);
                sessionStorageKeys.forEach(key => {
                    log(`ì‚­ì œ: sessionStorage['${key}']`);
                    sessionStorage.removeItem(key);
                });
                log('sessionStorage ì™„ì „ ì •ë¦¬ ì™„ë£Œ');

                // ì¿ í‚¤ ì •ë¦¬
                const cookies = document.cookie.split(';');
                log(`ì¿ í‚¤ ê°œìˆ˜: ${cookies.length}`);
                cookies.forEach(cookie => {
                    const name = cookie.split('=')[0].trim();
                    if (name) {
                        log(`ì¿ í‚¤ ì‚­ì œ: ${name}`);
                        document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
                    }
                });
                log('ì¿ í‚¤ ì™„ì „ ì •ë¦¬ ì™„ë£Œ');

                // ìºì‹œ ì •ë¦¬ (ê°€ëŠ¥í•œ ê²½ìš°)
                if ('caches' in window) {
                    caches.keys().then(cacheNames => {
                        log(`ìºì‹œ ê°œìˆ˜: ${cacheNames.length}`);
                        cacheNames.forEach(cacheName => {
                            log(`ìºì‹œ ì‚­ì œ: ${cacheName}`);
                            caches.delete(cacheName);
                        });
                        log('ìºì‹œ ì™„ì „ ì •ë¦¬ ì™„ë£Œ');
                    });
                } else {
                    log('ìºì‹œ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }

                log('=== ëª¨ë“  ë°ì´í„° ì‚­ì œ ì™„ë£Œ ===');
                showStatus('âœ… ëª¨ë“  ë¸Œë¼ìš°ì € ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');

                // 3ì´ˆ í›„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
                setTimeout(() => {
                    log('í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤...');
                    window.location.reload();
                }, 3000);

            } catch (error) {
                log(`ì˜¤ë¥˜ ë°œìƒ: ${error.message}`);
                showStatus(`âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
            }
        }

        function clearAuthData() {
            if (!confirm('ì¸ì¦ ê´€ë ¨ ë°ì´í„°ë§Œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            log('=== ì¸ì¦ ë°ì´í„° ì‚­ì œ ì‹œì‘ ===');

            try {
                const authKeys = [
                    'USER_DATA',
                    'currentUser',
                    'authUser',
                    'mockUsers',
                    'LOGIN_TIME',
                    'forceLogout',
                    'forceInit',
                    'FETCHING_PERMISSIONS',
                    'ACTIVE_PROGRAMS'
                ];

                // localStorageì—ì„œ ì¸ì¦ ê´€ë ¨ í‚¤ ì‚­ì œ
                authKeys.forEach(key => {
                    if (localStorage.getItem(key)) {
                        log(`ì‚­ì œ: localStorage['${key}']`);
                        localStorage.removeItem(key);
                    }
                });

                // sessionStorageì—ì„œ ì¸ì¦ ê´€ë ¨ í‚¤ ì‚­ì œ
                authKeys.forEach(key => {
                    if (sessionStorage.getItem(key)) {
                        log(`ì‚­ì œ: sessionStorage['${key}']`);
                        sessionStorage.removeItem(key);
                    }
                });

                // ì¸ì¦ ê´€ë ¨ ì¿ í‚¤ ì‚­ì œ
                const authCookies = ['token', 'auth', 'session'];
                authCookies.forEach(cookieName => {
                    document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
                    log(`ì¿ í‚¤ ì‚­ì œ: ${cookieName}`);
                });

                log('=== ì¸ì¦ ë°ì´í„° ì‚­ì œ ì™„ë£Œ ===');
                showStatus('âœ… ì¸ì¦ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');

                // 2ì´ˆ í›„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
                setTimeout(() => {
                    log('í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤...');
                    window.location.reload();
                }, 2000);

            } catch (error) {
                log(`ì˜¤ë¥˜ ë°œìƒ: ${error.message}`);
                showStatus(`âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
            }
        }

        function showCurrentData() {
            log('=== í˜„ì¬ ë°ì´í„° í™•ì¸ ===');

            // localStorage í™•ì¸
            const localStorageKeys = Object.keys(localStorage);
            log(`localStorage í‚¤ ê°œìˆ˜: ${localStorageKeys.length}`);
            localStorageKeys.forEach(key => {
                const value = localStorage.getItem(key);
                const preview = value ? value.substring(0, 100) + (value.length > 100 ? '...' : '') : 'null';
                log(`localStorage['${key}'] = ${preview}`);
            });

            // sessionStorage í™•ì¸
            const sessionStorageKeys = Object.keys(sessionStorage);
            log(`sessionStorage í‚¤ ê°œìˆ˜: ${sessionStorageKeys.length}`);
            sessionStorageKeys.forEach(key => {
                const value = sessionStorage.getItem(key);
                const preview = value ? value.substring(0, 100) + (value.length > 100 ? '...' : '') : 'null';
                log(`sessionStorage['${key}'] = ${preview}`);
            });

            // ì¿ í‚¤ í™•ì¸
            const cookies = document.cookie.split(';');
            log(`ì¿ í‚¤ ê°œìˆ˜: ${cookies.length}`);
            cookies.forEach(cookie => {
                if (cookie.trim()) {
                    log(`ì¿ í‚¤: ${cookie.trim()}`);
                }
            });

            log('=== ë°ì´í„° í™•ì¸ ì™„ë£Œ ===');
            showStatus('ğŸ“Š í˜„ì¬ ë°ì´í„° ì •ë³´ê°€ ë¡œê·¸ì— í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ë°ì´í„° ìë™ í‘œì‹œ
        window.onload = function () {
            log('ë¸Œë¼ìš°ì € ìºì‹œ ì •ë¦¬ ë„êµ¬ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            log(`í˜„ì¬ URL: ${window.location.href}`);
            log(`í˜„ì¬ ë„ë©”ì¸: ${window.location.hostname}`);
        };
    </script>
</body>

</html>

</html>