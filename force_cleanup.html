<!DOCTYPE html>
<html>

<head>
    <title>ì™„ì „í•œ ì²­ì†Œ ì‘ì—…</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
            font-size: 18px;
        }

        .content {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 3px;
        }

        button {
            padding: 12px 20px;
            margin: 10px 5px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        button:hover {
            background: #c82333;
        }

        .success {
            background: #28a745;
        }

        .success:hover {
            background: #218838;
        }

        .warning {
            background: #ffc107;
            color: #212529;
        }

        .warning:hover {
            background: #e0a800;
        }

        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }

        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
    </style>
</head>

<body>
    <h1>ğŸ§¹ ì™„ì „í•œ ì²­ì†Œ ì‘ì—…</h1>
    <p>ì´ í˜ì´ì§€ëŠ” ë¸Œë¼ìš°ì €ì˜ ëª¨ë“  ìºì‹œ, ë¡œì»¬ìŠ¤í† ë¦¬ì§€, ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ë¥¼ ì™„ì „íˆ ì‚­ì œí•©ë‹ˆë‹¤.</p>

    <div class="section">
        <div class="title">1ë‹¨ê³„: ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì²­ì†Œ</div>
        <div class="content">
            <p>ëª¨ë“  ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</p>
            <button onclick="clearLocalStorage()">ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì™„ì „ ì‚­ì œ</button>
            <div id="localStorageStatus"></div>
        </div>
    </div>

    <div class="section">
        <div class="title">2ë‹¨ê³„: ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ì²­ì†Œ</div>
        <div class="content">
            <p>ëª¨ë“  ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</p>
            <button onclick="clearSessionStorage()">ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ì™„ì „ ì‚­ì œ</button>
            <div id="sessionStorageStatus"></div>
        </div>
    </div>

    <div class="section">
        <div class="title">3ë‹¨ê³„: ì¿ í‚¤ ì²­ì†Œ</div>
        <div class="content">
            <p>ëª¨ë“  ì¿ í‚¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</p>
            <button onclick="clearCookies()">ì¿ í‚¤ ì™„ì „ ì‚­ì œ</button>
            <div id="cookieStatus"></div>
        </div>
    </div>

    <div class="section">
        <div class="title">4ë‹¨ê³„: ë¸Œë¼ìš°ì € ìºì‹œ ì²­ì†Œ</div>
        <div class="content">
            <p>Service Worker ìºì‹œì™€ IndexedDBë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</p>
            <button onclick="clearBrowserCache()">ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ</button>
            <div id="cacheStatus"></div>
        </div>
    </div>

    <div class="section">
        <div class="title">5ë‹¨ê³„: ëª¨ë“  ì²­ì†Œ ì‘ì—… ì‹¤í–‰</div>
        <div class="content">
            <p>ìœ„ì˜ ëª¨ë“  ì²­ì†Œ ì‘ì—…ì„ í•œ ë²ˆì— ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
            <button onclick="clearEverything()" class="success">ëª¨ë“  ë°ì´í„° ì™„ì „ ì‚­ì œ</button>
            <div id="everythingStatus"></div>
        </div>
    </div>

    <div class="section">
        <div class="title">6ë‹¨ê³„: ê°•ì œ ìƒˆë¡œê³ ì¹¨</div>
        <div class="content">
            <p>ì²­ì†Œ í›„ ê°•ì œë¡œ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤.</p>
            <button onclick="forceRefresh()" class="warning">ê°•ì œ ìƒˆë¡œê³ ì¹¨</button>
        </div>
    </div>

    <div class="section">
        <div class="title">ì‘ì—… ë¡œê·¸</div>
        <div id="log" class="log"></div>
        <button onclick="clearLog()">ë¡œê·¸ ì§€ìš°ê¸°</button>
    </div>

    <div class="section">
        <div class="title">í˜„ì¬ ìƒíƒœ í™•ì¸</div>
        <div class="content">
            <button onclick="checkStatus()">í˜„ì¬ ìƒíƒœ í™•ì¸</button>
            <div id="statusCheck"></div>
        </div>
    </div>

    <script>
        function addLog(message) {
            const log = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML += `[${timestamp}] ${message}\n`;
            log.scrollTop = log.scrollHeight;
            console.log(message);
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }

        function showStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function clearLocalStorage() {
            try {
                addLog('ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì²­ì†Œ ì‹œì‘...');

                // ëª¨ë“  í‚¤ ì‚­ì œ
                const keys = [];
                for (let i = 0; i < localStorage.length; i++) {
                    keys.push(localStorage.key(i));
                }

                keys.forEach(key => {
                    localStorage.removeItem(key);
                    addLog(`ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í‚¤ ì‚­ì œ: ${key}`);
                });

                // ì „ì²´ ì‚­ì œ
                localStorage.clear();
                addLog('ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì™„ì „ ì‚­ì œ ì™„ë£Œ');
                showStatus('localStorageStatus', 'âœ… ë¡œì»¬ìŠ¤í† ë¦¬ì§€ê°€ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } catch (error) {
                addLog(`ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì‚­ì œ ì˜¤ë¥˜: ${error.message}`);
                showStatus('localStorageStatus', `âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        function clearSessionStorage() {
            try {
                addLog('ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ì²­ì†Œ ì‹œì‘...');

                // ëª¨ë“  í‚¤ ì‚­ì œ
                const keys = [];
                for (let i = 0; i < sessionStorage.length; i++) {
                    keys.push(sessionStorage.key(i));
                }

                keys.forEach(key => {
                    sessionStorage.removeItem(key);
                    addLog(`ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ í‚¤ ì‚­ì œ: ${key}`);
                });

                // ì „ì²´ ì‚­ì œ
                sessionStorage.clear();
                addLog('ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ì™„ì „ ì‚­ì œ ì™„ë£Œ');
                showStatus('sessionStorageStatus', 'âœ… ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ê°€ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } catch (error) {
                addLog(`ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ì‚­ì œ ì˜¤ë¥˜: ${error.message}`);
                showStatus('sessionStorageStatus', `âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        function clearCookies() {
            try {
                addLog('ì¿ í‚¤ ì²­ì†Œ ì‹œì‘...');

                const cookies = document.cookie.split(";");
                cookies.forEach(cookie => {
                    const eqPos = cookie.indexOf("=");
                    const name = eqPos > -1 ? cookie.substr(0, eqPos).trim() : cookie.trim();
                    if (name) {
                        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/";
                        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=" + window.location.hostname;
                        addLog(`ì¿ í‚¤ ì‚­ì œ: ${name}`);
                    }
                });

                addLog('ì¿ í‚¤ ì™„ì „ ì‚­ì œ ì™„ë£Œ');
                showStatus('cookieStatus', 'âœ… ì¿ í‚¤ê°€ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } catch (error) {
                addLog(`ì¿ í‚¤ ì‚­ì œ ì˜¤ë¥˜: ${error.message}`);
                showStatus('cookieStatus', `âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        function clearBrowserCache() {
            try {
                addLog('ë¸Œë¼ìš°ì € ìºì‹œ ì²­ì†Œ ì‹œì‘...');

                // Service Worker ìºì‹œ ì‚­ì œ
                if ('caches' in window) {
                    caches.keys().then(function (names) {
                        for (let name of names) {
                            caches.delete(name);
                            addLog(`Service Worker ìºì‹œ ì‚­ì œ: ${name}`);
                        }
                    });
                }

                // IndexedDB ì‚­ì œ
                if ('indexedDB' in window) {
                    indexedDB.databases().then(function (databases) {
                        databases.forEach(function (database) {
                            if (database.name) {
                                indexedDB.deleteDatabase(database.name);
                                addLog(`IndexedDB ì‚­ì œ: ${database.name}`);
                            }
                        });
                    });
                }

                addLog('ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ ì™„ë£Œ');
                showStatus('cacheStatus', 'âœ… ë¸Œë¼ìš°ì € ìºì‹œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } catch (error) {
                addLog(`ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ ì˜¤ë¥˜: ${error.message}`);
                showStatus('cacheStatus', `âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        function clearEverything() {
            addLog('=== ëª¨ë“  ì²­ì†Œ ì‘ì—… ì‹œì‘ ===');
            clearLocalStorage();
            clearSessionStorage();
            clearCookies();
            clearBrowserCache();

            setTimeout(() => {
                addLog('=== ëª¨ë“  ì²­ì†Œ ì‘ì—… ì™„ë£Œ ===');
                showStatus('everythingStatus', 'âœ… ëª¨ë“  ë°ì´í„°ê°€ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            }, 1000);
        }

        function forceRefresh() {
            addLog('ê°•ì œ ìƒˆë¡œê³ ì¹¨ ì‹¤í–‰...');
            // ìºì‹œë¥¼ ë¬´ì‹œí•˜ê³  ê°•ì œ ìƒˆë¡œê³ ì¹¨
            window.location.reload(true);
        }

        function checkStatus() {
            addLog('í˜„ì¬ ìƒíƒœ í™•ì¸ ì¤‘...');

            let status = '<h4>í˜„ì¬ ìƒíƒœ:</h4>';

            // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ìƒíƒœ
            const localStorageCount = localStorage.length;
            status += `<div>ë¡œì»¬ìŠ¤í† ë¦¬ì§€: ${localStorageCount}ê°œ í•­ëª©</div>`;

            // ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ ìƒíƒœ
            const sessionStorageCount = sessionStorage.length;
            status += `<div>ì„¸ì…˜ìŠ¤í† ë¦¬ì§€: ${sessionStorageCount}ê°œ í•­ëª©</div>`;

            // ì¿ í‚¤ ìƒíƒœ
            const cookieCount = document.cookie ? document.cookie.split(';').length : 0;
            status += `<div>ì¿ í‚¤: ${cookieCount}ê°œ</div>`;

            // USER_DATA í™•ì¸
            const userData = localStorage.getItem('USER_DATA');
            if (userData) {
                try {
                    const parsed = JSON.parse(userData);
                    status += `<div class="status warning">âš ï¸ USER_DATA ì¡´ì¬: ${parsed.role || 'role ì—†ìŒ'}</div>`;
                } catch (e) {
                    status += `<div class="status error">âŒ USER_DATA íŒŒì‹± ì˜¤ë¥˜</div>`;
                }
            } else {
                status += `<div class="status success">âœ… USER_DATA ì—†ìŒ</div>`;
            }

            document.getElementById('statusCheck').innerHTML = status;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function () {
            addLog('ì™„ì „í•œ ì²­ì†Œ ì‘ì—… í˜ì´ì§€ ë¡œë“œë¨');
            checkStatus();
        };
    </script>
</body>

</html>